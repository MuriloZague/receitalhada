generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Users {
  id_user                      Int         @id @default(autoincrement())
  email                        String      @unique
  name                         String
  username                     String      @unique
  img_url                      String?
  phone                        String
  password                     String
  authenticate_code            String?     @unique
  register_at                  DateTime?
  forgot_password_code         String?     @unique
  forgot_password_expires_at   DateTime?
  forgot_password_attempts     Int         @default(0)
  forgot_password_attempted_at DateTime?
  Recipes                      Recipes[]
  Admins                       Admins[]
  Favorites                    Favorites[]
  Comments                     Comments[]
  Ratings                      Ratings[]
}

model Admins {
  id_admin Int   @id @default(autoincrement())
  user_id  Int
  user     Users @relation(fields: [user_id], references: [id_user])
}

model Recipes {
  id_recipes           Int         @id @default(autoincrement())
  title                String      @db.VarChar(255)
  ingredients          String?
  preparationMethod    String?
  observation          String?
  author_id            Int
  author               Users       @relation(fields: [author_id], references: [id_user])
  Favorites            Favorites[]
  Comments             Comments[]
  Ratings              Ratings[]
  createdAt            DateTime    @default(now())
  updatedAt            DateTime    @updatedAt
  Categories           Categories? @relation(fields: [categorysId_category], references: [id_category])
  categorysId_category Int?
}

model Favorites {
  id_favorite Int     @id @default(autoincrement())
  user_id     Int
  recipe_id   Int
  user        Users   @relation(fields: [user_id], references: [id_user])
  recipe      Recipes @relation(fields: [recipe_id], references: [id_recipes])
}

model Comments {
  id_comment Int      @id @default(autoincrement())
  content    String
  user_id    Int
  recipe_id  Int
  user       Users    @relation(fields: [user_id], references: [id_user])
  recipe     Recipes  @relation(fields: [recipe_id], references: [id_recipes])
  createdAt  DateTime @default(now())
}

model Ratings {
  id_rating    Int      @id @default(autoincrement())
  rating_value Float
  user_id      Int
  recipe_id    Int
  user         Users    @relation(fields: [user_id], references: [id_user])
  recipe       Recipes  @relation(fields: [recipe_id], references: [id_recipes])
  createdAt    DateTime @default(now())
}

model Categories {
  id_category Int       @id @default(autoincrement())
  name        String    @db.VarChar(255)
  Recipes     Recipes[]
}
